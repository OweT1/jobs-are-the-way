name: Hourly Message job - DEV

on:
  workflow_dispatch: # Allows to run the script manually for testing

jobs:
  run-script:
    runs-on: ubuntu-latest # Specifies the runner environment
    environment: develop

    env:
      ENVRIONMENT_NAME: ${{ vars.ENVIRONMENT_NAME }}
      OPENROUTER_API_KEY: ${{ secrets.OPENROUTER_API_KEY }}
      OPENROUTER_BASE_URL: ${{ vars.OPENROUTER_BASE_URL }}
      DEFAULT_LOCATION: ${{ vars.DEFAULT_LOCATION }}
      TELEGRAM_BOT_API: ${{ secrets.TELEGRAM_BOT_API }}
      TELEGRAM_CHANNEL_ID: ${{ secrets.TELEGRAM_CHANNEL_ID }}
      AIML_ENGINEER_THREAD_ID: ${{ vars.AIML_ENGINEER_THREAD_ID }}
      DATA_ENGINEER_THREAD_ID: ${{ vars.DATA_ENGINEER_THREAD_ID}}
      DATA_SCIENTIST_THREAD_ID: ${{ vars.DATA_SCIENTIST_THREAD_ID }}
      DATA_ANALYST_THREAD_ID: ${{ vars.DATA_ANALYST_THREAD_ID }}
      SOFTWARE_ENGINEER_THREAD_ID: ${{ vars.SOFTWARE_ENGINEER_THREAD_ID}}
      OTHERS_THREAD_ID: ${{ vars.OTHERS_THREAD_ID }}
      AIML_ENGINEER_INTERN_THREAD_ID: ${{ vars.AIML_ENGINEER_INTERN_THREAD_ID }}
      DATA_ENGINEER_INTERN_THREAD_ID: ${{ vars.DATA_ENGINEER_INTERN_THREAD_ID}}
      DATA_SCIENTIST_INTERN_THREAD_ID: ${{ vars.DATA_SCIENTIST_INTERN_THREAD_ID }}
      DATA_ANALYST_INTERN_THREAD_ID: ${{ vars.DATA_ANALYST_INTERN_THREAD_ID }}
      SOFTWARE_ENGINEER_INTERN_THREAD_ID: ${{ vars.SOFTWARE_ENGINEER_INTERN_THREAD_ID}}
      OTHERS_INTERN_THREAD_ID: ${{ vars.OTHERS_INTERN_THREAD_ID }}
      SENIOR_TECH_THREAD_ID: ${{ vars.SENIOR_TECH_THREAD_ID }}
      NOT_RELEVANT_THREAD_ID: ${{ vars.NOT_RELEVANT_THREAD_ID }}
      POSTGRES_DB_URL: ${{ secrets.POSTGRES_DB_URL }}

    steps:
      - name: Checkout code
        uses: actions/checkout@v6 # Action to check out repository code

      - name: Build & Run Docker image
        run: |
          docker build -t find_jobs . |
          docker run find_jobs
